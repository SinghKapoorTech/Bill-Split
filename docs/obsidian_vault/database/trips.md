---
title: Trips Collection Schema
date: 2026-02-21
tags: [database, schema, firestore, trips]
---

# `trips` & `tripInvitations` Collections

The trip functionality is split across two collections to manage the lifecycle of invites securely. Trips represent formal organizational containers for shared bills (e.g., a vacation, a group dinner, a weekend event).

## `trips` Collection

### Document ID
Auto-generated by Firestore.

### Schema (`Trip`)

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | The document ID. |
| `name` | String | Trip display name. |
| `description` | String (Optional) | Trip context or details. |
| `ownerId` | String | UID of the trip creator (**[Users](users.md)** ref). |
| `memberIds` | Array of String | Array of active UIDs in the trip. |
| `pendingInvites` | Array of String | Array of **email addresses** that have been invited but haven't accepted. |
| `createdAt` | Timestamp | Creation time. |
| `updatedAt` | Timestamp | Last modification time. |

---

## `tripInvitations` Collection
This collection tracks the status of invitations sent via email to join a trip.

### Document ID
Auto-generated by Firestore.

### Schema (`TripInvitation`)

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | Invitation ID. |
| `tripId` | String | Ref to the **`trips`** collection. |
| `email` | String | The email address the invite was sent to. |
| `invitedBy` | String | UID of the user who sent the invite. |
| `status` | String | Enum: `'pending'` \| `'accepted'` \| `'declined'`. |
| `createdAt` | Timestamp | When the invite was sent. |
| `respondedAt` | Timestamp (Optional) | When the invite was acted upon. |

## Relationship Flow
1. **Invite Sent**: A new `tripInvitations` document is created with status `pending`. Simultaneously, the `email` string is pushed to the `pendingInvites` array on the trip document.
2. **Invite Accepted**: The `tripInvitations` status shifts to `accepted`. The trip document is updated: the email is removed from `pendingInvites`, and the resolving user's UID is pushed to `memberIds`.
3. **Usage**: A **[Bill](bills.md)** can optionally reference a `tripId`, associating that financial transaction directly with a trip.
