---
title: Groups Collection Schema
date: 2026-02-20
tags: [database, schema, firestore, groups]
---

# `groups` & `groupInvitations` Collections

The grouping functionality is split across two collections to manage the lifecycle of invites securely. Groups represent formal organizational structures, potentially distinct from the more ad-hoc `squads`.

## `groups` Collection

### Document ID
Auto-generated by Firestore.

### Schema (`Group`)

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | The document ID. |
| `name` | String | Group display name. |
| `description` | String (Optional) | Group context. |
| `ownerId` | String | UID of the group creator (**[Users](users.md)** ref). |
| `memberIds` | Array of String | Array of active UIDs in the group. |
| `pendingInvites` | Array of String | Array of **email addresses** that have been invited but haven't accepted. |
| `createdAt` | Timestamp | Creation time. |
| `updatedAt` | Timestamp | Last modification time. |

---

## `groupInvitations` Collection
This collection tracks the status of invitations sent via email to join a group.

### Document ID
Auto-generated by Firestore.

### Schema (`GroupInvitation`)

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | Invitation ID. |
| `groupId` | String | Ref to the **`groups`** collection. |
| `email` | String | The email address the invite was sent to. |
| `invitedBy` | String | UID of the user who sent the invite. |
| `status` | String | Enum: `'pending'` \| `'accepted'` \| `'declined'`. |
| `createdAt` | Timestamp | When the invite was sent. |
| `respondedAt` | Timestamp (Optional) | When the invite was acted upon. |

## Relationship Flow
1. **Invite Sent**: A new `groupInvitations` document is created with status `pending`. Simultaneously, the `email` string is pushed to the `pendingInvites` array on the `groups` document.
2. **Invite Accepted**: The `groupInvitations` status shifts to `accepted`. The `groups` document is updated: the email is removed from `pendingInvites`, and the resolving user's UID is pushed to `memberIds`.
3. **Usage**: A **[Bill](bills.md)** can optionally reference a `groupId`, associating that financial transaction directly with this formal group identity.
